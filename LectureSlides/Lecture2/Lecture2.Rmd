---
title: 'MPP-E1180 Lecture 2: Files, File Structures, Version Control, & Collaboration'
author: "Christopher Gandrud"
date: "18 September 2014"
output:
  ioslides_presentation:
    css: http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css
    logo: https://raw.githubusercontent.com/christophergandrud/Hertie_Collab_Data_Science/master/img/HertieCollaborativeDataLogo_v1.png
  beamer_presentation: default
---

## <i class="fa fa-arrow-circle-o-up"></i> Objectives for the week

- Importance of (text) files and understanding files structures for reproducible
research

- Understanding files paths (conventions, best practices)

- Accessing the file system from R

- Introduction to Git/GitHub for version control

- Git/GitHub for collaboration


## <i class="fa fa-bookmark-o"></i> Remember: Practical Tips for Reproducible Research

- <i class="fa fa-pencil-square-o"></i> Document Everything!

- <i class="fa fa-file-code-o"></i> Everything is a (text) file.

- <i class="fa fa-smile-o"></i> All files should be human readable.

- <i class="fa fa-link"></i> Explicitly tie your files together.

- <i class="fa fa-list-ol"></i> Have a plan to organise, store, and make your files available.

## <i class="fa fa-bolt"></i> Importance of understanding files/file structures

- This topic may seem kind of . . . dry.

- Why not just click and drag files?

## <i class="fa fa-bolt"></i> Importance of understanding files/file structures

- **Reproducibility**: other researchers only have your files. If they are **well
    organised** and the **links** between the files are **explicitly stated** 
    then they can better understand what you did.
    
    + Most clear way of explicitly stating links is **dynamically** using file 
    paths in your source code.
    
- **The software tools of really reproducible research**: R, RMarkdown, LaTeX, etc.
    all assume that you understand file paths.
    
- **You**: well organised files will be easier for you to find/understand/use
    in 6 months.
    
## <i class="fa fa-file-code-o"></i> Why text files?

- Basically files are ultimately text files. E.g. a website is typically just a
series of connected `.html`, `.js`, and `.css` files. 

    + These are text files!
    
- Text files are **versitile**.

    + Store your code (`.csv`), store your analysis code (`.R`), store your 
    presentation markup (`.Rmd`, `.tex`, `.bib`).
    
- They are **simple** and are **not dependent on particular software**. Any 
text editor can open them.
    
    + Helps **future-proof** research.

- Easy to **version control**.
    
## <i class="fa fa-file-code-o"></i> Text files best practices

- Use RStudio or some **text editor** (personal current favourite: [atom.io](https://atom.io/))
to edit text files.

    + <i class="fa fa-exclamation-triangle"></i> Never open/edit using MS Word! 

    + Word will add a lot of hidden background text that is likely to cause problems
    with R and other software. R/etc doesn't understand Word's instructions.
    
## <i class="fa fa-file-code-o"></i> Text files best practices

+ Document your text files, including **informative header**. 

    - Use **comment characters** (R: `#`, Markdown/HTML: `<!-- -->`)
    
    - For example:
    
```{r, eval=FALSE}
#####################
# R source to gather World Bank data
# Christopher Gandrud
# 18 September 2014
# MIT License
####################

2 + 2 # Inline comment 
```

## <i class="fa fa-file-code-o"></i> Text files best practices

+ Keep line length to about 80 characters.

    + In Markdown/LaTeX paragraph breaks only exist if there are **two line 
    breaks**.
    
    + Most text editors, including RStudio have a character ruler.

    + Improves version control. 

```
This is treated as 
only one paragraph.

This is treated as 

two paragraphs.
```

## <i class="fa fa-folder-open-o"></i> File paths

- Files are organised **hierarchically** into (upside down) trees. 

```
Root
|_
    Parent
    |_
        Child1
        Child2
```

## <i class="fa fa-folder-open-o"></i> Root

**Root** directories are the first level of a disk. 

They are the root out of which the file tree grows.

**Naming Conventions**:

**Linux/Mac**: `/`, e.g. `/git_repos` means that the `git_repos` directory is a child
of the root directory.

**Windows**: the disk is partitioned, e.g. the C partition is denoted `C:\`. 
`C:\git_repos` indicates that the `git_repos` directory is a child
of the `C:\` partition.

## <i class="fa fa-folder-open-o"></i> Sub (child) directories

Sub (child) directories are denoted with a `/` in Linux/Mac and `\` in Windows, e.g.:

```
# Linux/Mac
/git_repos/Project1

# Windows
C:\git_repos\Project1
```

<i class="fa fa-exclamation"></i> R tip: 

- In R for Windows you either use two backslashes `\\` (`\` is the R **escape
character**).

- Alternatively, use `/` in **relative paths** in R for Windows, it will know 
what you mean.

## <i class="fa fa-folder-open-o"></i> Working directories

A **working directory** is the directory where the program looks for files/other
directories. 

<i class="fa fa-exclamation"></i> Always remember the working directory. Otherwise
you may open/save files that you do not want to open/save or save them to places
you don't want them saved.

## <i class="fa fa-folder-open-o"></i> Working directories

In R:

```{r}
# Find working directory
getwd()

# List all files in the working directory
list.files()
```

```{r, eval=FALSE}
# Set root as working directory
setwd('/')
```

## <i class="fa fa-folder-open-o"></i> Extra: in the Terminal/Shell

```{sh}
# Find working directory
pwd

# Set root as working directory
cd /
```

## <i class="fa fa-folder-open-o"></i> Relative vs. Absolute file paths

Use **relative file paths** when possible.

- Absolute file path: the entire path on a particular system, 
    + E.g. `/git_repos/Project1/Paper.Rmd`

- Relative file path: the path relative to the working directory. 

    + E.g. if `/git_repos` is the working directory then the relative path for 
    `Paper.Rmd` is `Project1/Paper.Rmd`.

Why? 

- Your scripts will run easily on other computers. Enhances reproducibility,
easier for your collaborators, easier for you.


